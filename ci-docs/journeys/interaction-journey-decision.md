---
title: Personalize messages, make journey decisions based on web interactions
description: Learn how to personalize messages and make journey decisions based on web interactions in Dynamics 365 Customer Insights - Journeys.
ms.date: 05/15/2025
ms.topic: how-to
author: alfergus
ms.author: colinbirkett
search.audienceType:
  - admin
  - customizer
  - enduser
ms.custom:
  - ai-gen-docs-bap
  - ai-gen-description
  - ai-seo-date:12/12/2024
---

# Personalize messages, make journey decisions based on web interactions

> [!NOTE]
> - This feature applies to known contacts or leads, such as those who have visited a webpage through a tracking link in a Customer Insights - Journeys email or submitted a Customer Insights - Journeys form on a website. Therefore any anonymous web interactions such as visits, clicks, and anonymous web form traffic are not supported and won't be surfaced in the out-of-the-box analytics. 
> - To enable web tracking in Customer Insights - Journeys forms, enable the **Web Tracking** setting in **Forms** > **Form settings** > **General**.

In Customer Insights - Journeys, you can track and leverage your customers’ online behavior to deliver personalized experiences across digital channels. For example, you can boost conversions and customer loyalty by sending tailored offers after customers visit your website and show interest in a product or service. By tracking additional data about customers' online journeys, you can gain valuable insights into your customers' preferences and needs and easily measure your campaign’s effectiveness.

Web tracking helps you understand website usage by capturing:

- **Website visits**: Captured every time a known customer visits a page on your website.
- **Website link clicks**: Captured every time a known customer selects a link such as a banner on your website.

## Set up web tracking

To enable web tracking, you must add JavaScript code generated by Customer Insights - Journeys to each website that you want to track. The JavaScript code uses cookies to record each page that an individual browser requests from your website. Learn more: [How the real-time journeys app uses cookies](real-time-journeys-cookies.md).

> [!IMPORTANT]
> The website tracking script that's supplied by this feature attempts to set a cookie for all visitors to your site. If your site includes a feature that allows visitors to opt-out of cookies, the website tracking script still attempts to set its cookie even for visitors who have opted-out. If you want to fully respect the opt-out preference of your site visitors, you must modify the website tracking script as required so that it also works with your site's opt-out mechanism.

> [!TIP]
> Many countries and regions (including the European Union) require that you get consent before setting a cookie on a user's machine. It's your organization's responsibility to be aware of, and conform to, all relevant laws and regulations in the markets where you operate, including consent to set cookies. Read more about the EU regulations: [Cookies and similar technologies](https://commission.europa.eu/resources-partners/europa-web-guide/design-content-and-development/privacy-security-and-legal-notices/cookies-and-similar-technologies_en). Learn more about cookies in real-time journeys: [How the real-time journeys app uses cookies](real-time-journeys-cookies.md).

To set up web tracking:

1. Navigate to **Settings**.
1. Now, go to the **Web Tracking** option under the **Customer Engagement** section on the left menu. This is the tracking script that you must place on your website that you want to track. It's read-only.

    :::image type="content" source="media/interaction-journey-script.png" alt-text="Screenshot of tracking script to copy." lightbox="media/interaction-journey-script.png":::

1. Copy the JavaScript code (be sure to select all of it) and place it in the `<head>` tag of your website. Make sure you don't already have a script set up for your site.
    - If you're using Power Pages, go to the Portal Management app. Go to **Content** > **Web Templates** > **Header**, paste the Customer Insights - Journeys tracking script, and then **Save**.
    - If you're using a tag manager such as Google Tag Manager, go to the Google Tag Manager portal. Select **Add new tag** > **Tag configuration** > **Custom HTML**, paste the Customer Insights - Journeys tracking script, and then **Save**. You'll also need to determine when this triggers (for example, "All Pages"). Once you're done, select the **Submit** button to publish your changes.
    - If you're using another Content Management System (CMS) such as Wordpress, your CMS provider should have an easy way to add a script to the site header. Here's an example from Wordpress: [Add Code to Headers](https://wordpress.com/support/adding-code-to-headers/).

## Conditions needed for web tracking to work

For **Web Tracking** to work, you need the following conditions to be met:
1.	The web tracking script added to the header of the website/pages you want to track.
2.	Customer’s first visit to your website is coming from clicking on a Customer Insights – Journeys link (e.g., email link click that directs your customer to your website)
3.	Link tracking enabled in for your URL. 
4.	Customer (e.g., Contact) has **Allow Tracking** enabled. [Lear more](https://learn.microsoft.com/en-us/dynamics365/customer-insights/journeys/real-time-marketing-email-text-consent#consent-to-track-user-behavior) about how you can manage consent for tracking.

## How does web tracking work

-	Once a customer visits your website from a Customer Insights Journeys originated link, the web tracking script will create a cookie named [msdynci_trackingContext](https://learn.microsoft.com/en-us/dynamics365/customer-insights/journeys/real-time-journeys-cookies#list-of-real-time-journeys-cookies) for this customer.
-	If the customer doesn’t explicitly remove the cookie, this cookie will be available in the future visits of your customer even if they did not go to your website from a Customer Insights Journeys link.
-	Customer interactions like web site visited and link clicked will be tracked and available in your customers (e.g., Contact) insights tab and on the timeline.
-	If any of the conditions in the section above are not met (e.g., you disabled link tracking, or your customer consent record doesn’t allow tracking) the web interactions will not be tracked nor available even if the web tracking link is present and the customer visited your website from a Customer Insights Journeys link.
  
> [!IMPORTANT]
> It’s enough for your customer to visit your website only once from a Customer Insights Journeys link, all future visits and clicks will be automatically tracked even if the customer did not visit your website from a Customer Insights Journeys link. This is true unless your customer had deleted the cookie manually.”

## Web tracking & forms web tracking

Customer Insights Journeys [forms](https://learn.microsoft.com/en-us/dynamics365/customer-insights/journeys/real-time-marketing-manage-forms#form-settings) have a toggle to enable web tracking. The toggle is disabled by default and you must enable it for **Form** web tracking to work. 
As mentioned above, for web tracking to work, your customers has to at least once visit your website through a Customer Insights Journeys link, so a cookie can be created for future visits and interactions.
**Forms Web Tracking** added value is that, if your customer submits a form, even with never visiting your website through Customer Insights Journey link, the form submission will create a cookie named [msdynmkt_formsubmissionid](https://learn.microsoft.com/en-us/dynamics365/customer-insights/journeys/real-time-journeys-cookies#list-of-real-time-journeys-cookies) that will allow the web tracking script to track your customer future website visits and interactions.

> [!IMPORTANT]
> You must add the web tracking script into your website for **Form** web tracking to work.

## Personalize customer experiences based on web interaction

Web interactions can be utilized to create personalized customer experiences in the following ways:

- As triggers to initiate a real-time journey to known contacts or leads.

    :::image type="content" source="media/interaction-journey-trigger.png" alt-text="Screenshot of using a web interaction as a trigger." lightbox="media/interaction-journey-trigger.png":::
  
- In an if/then branch to respond to your customers’ website actions.
  
    :::image type="content" source="media/interaction-journey-if-then.png" alt-text="Screenshot of using a web interaction in an if/then branch." lightbox="media/interaction-journey-if-then.png":::

In both instances, you can define conditions based on webpage URL, webpage title, etc., to differentiate the experience based on a specific web property or specific web action such as viewing the shopping cart. Here are some examples:
- Page URL (msdynci_viewuri): The URL of the visited page (for example, https://www.contoso.com/home).
- Page name (msdynci_viewname): The name of the visited page (for example, "home.html").
- Page title (msdynci_viewtitle): The title of the visited page (for example, "Home").
- View type (msdynci_viewtype): The type of the visited page (for example, "page").
- Previous page name (msdynci_viewpreviousviews): The URL of the previous visited page for the session (for example, https://www.contoso.com).
- Action Type (msdynci_actiontype): The type of user interaction captured during a web interaction (for example, LClick). Possible values:
  - leftClick: "LClick"
  - rightClick: "RClick"
  - middleClick: "MClick"
  - keyboardEnter: "KEnter"
  - keyboardSpace: "KSpace"
- Action is outbound (msdynci_actionisoutbound): Refers to whether the user’s click leads them to a destination outside of the current domain (for example, false).
- Click coordinates (msdynci_clickcoordinates): The exact click location on the webpage (for example, 23456).

[!INCLUDE [footer-include](./includes/footer-banner.md)]
