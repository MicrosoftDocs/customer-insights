---
title: Troubleshoot push notification setup
description: Learn how to troubleshoot push notification setup in Dynamics 365 Customer Insights - Journeys.
ms.date: 05/20/2025
ms.topic: article
author: colinbirkett
ms.author: colinbirkett
search.audienceType: 
  - admin
  - customizer
  - enduser
---

# Troubleshooting push notifications setup

This article covers possible problems with push notifications setup in Customer Insights - Journeys and provides some troubleshooting solutions.

## Device registration problems

The following are possible device registration problems.

**I'm calling the device registration public API, it returns '202', but nothing happens**

The device registration public API returns in asynchronous manner. This is a reason why the response status code is 202 (Accepted) and not 200 (OK). The request starts the registration process, but this doesn't necessarily mean success of the operation. There's a separate [device registration status API](developer-push-device-registration.md#device-registration-status) you need to call to see results of the registration. Use `RegistrationRequestId` provided as response of device registration API execution to request the registration status.

**Registration status API shows the following failure message: *Provided API token is not valid***

The device registration API request body has ApiToken field and its value should be equal to the one shown within the "Access tokens" section of "Developer Information" tab of Mobile Application configuration in CRM UI. Make sure the value used in the API is taken from the correct mobile application and the correct mobile application ID is used for the request.

**Registration status API includes the following failure text: *Sending a test invisible notification failed for the given device token***

As a part of device registration process, Customer Insights sends an invisible test push notification for a given device token. If sending fails, the registration process also fails. The sections below explain the problem, in accordance with platform type (Android or iOS).

## Push notification sending problems for Android

The following are push notification sending problems for Android.

**Sending failure includes "Provided service account JSON is incorrect" message**

In order to send push notifications, Customer Insights needs to have a correct service account JSON file uploaded within the mobile application CRM UI. A common mistake is to use a google-service.json file. This file is used within source code of mobile app itself and shouldn't be used in CRM. To see how to fetch correct service account JSON file, see [Transition Android push notifications to Firebase Cloud Messaging (FCM) tokens for authentication](push-notification-fcm-token-transition.md).

**Sending failure includes "PROJECT_NOT_PERMITTED" error code**

It's likely the "Firebase In-App Messaging API" service isn't enabled. Navigate to "Google Cloud" from within the Firebase Console UI, find "Firebase In-App Messaging API" and enable it.

**Customer Insights claims notification was sent successfully, but no notification appeared on the screen**

Customer Insights sends push notifications using data payload format. This is required to make changes in the mobile application code to receive the push notification payload and render it as a popup. For more instructions, see [Receiving push notifications on mobile devices](developer-notifications.md).

For more information about data payload formats in Firebase, see [FCM message types](https://firebase.google.com/docs/cloud-messaging/concept-options#notifications_and_data_messages).

**Sending failure includes unclear error code or message**

Customer Insights sends push notification using Firebase servers directly. Failure response comes directly from the Firebase server if there's submission failure. Review [ErrorCode](https://firebase.google.com/docs/reference/fcm/rest/v1/ErrorCode) for all possible error codes and their meaning.

## Push notification sending problems for iOS

For notification sending problems for iOS, it's possible to use external third-party websites to help troubleshoot, such as <https://apnspush.com/>. These websites allow you to quickly test push notification submission and see if any changes made work.

**Sending failure includes BadDeviceToken error code**

The most common reason of this error is mismatching environment of device token and CRM configuration. When the device token is generated by iOS application, it's also generated for Sandbox or Production mode. It's required to set the same app mode in the CRM UI and use the same app mode credentials in the CRM mobile application.

**Sending fails for iOS device tokens wrapped by Firebase**

Customer Insights doesn't currently support iOS device tokens working via FCM. Make sure that a device token used for iOS device registration has an original APNS device token in the correct format. This token includes only HEX symbols, for example, 0123456789ABCDEF. Make sure the token doesn't exceed 64 characters.

**Sending failure includes unclear error code or message**

Customer Insights sends push notification using APNS servers directly. Failure responses directly come from APNS server if there's a submission failure. Review [local and remote notification programming guide: Communicating with APNs](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html#//apple_ref/doc/uid/TP40008194-CH11-SW17) for all possible error codes and their meaning.

[!INCLUDE [footer-include](./includes/footer-banner.md)]
