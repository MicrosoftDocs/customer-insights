---
title: Troubleshoot push notification setup
description: Learn how to troubleshoot push notification setup in Dynamics 365 Customer Insights - Journeys.
ms.date: 05/20/2025
ms.topic: article
author: colinbirkett
ms.author: colinbirkett
search.audienceType: 
  - admin
  - customizer
  - enduser
---

# Troubleshoot push notifications setup

This article covers possible problems with push notifications setup in Customer Insights - Journeys.

## Device registration problems

The following cover possible device registration problems.

**I'm calling device registration public API, it returns 202, but nothing happens**

Device registration public API returns in asynchronous manner. This is a reason why the response status code is 202 (Accepted) and not 200 (OK). The request starts the registration process, but this doesn't necessarily mean success of the operation. There's a separate [device registration status API](developer-push-device-registration.md#device-registration-status) to call in order to see results of the registration. Use `RegistrationRequestId` provided as response of device registration API execution to request the registration status.

**Registration status API shows the following failure message: Provided API token is not valid**

Device registration API request body has ApiToken field and its value should be equal to the one shown within "Access tokens" section of "Developer Information" tab of Mobile Application configuration in CRM UI. Make sure the value used in API is taken from the correct mobile application and correct mobile application ID is used for the request itself.

**Registration status API includes the following failure text: Sending a test invisible notification failed for the given device token**

As a part of device registration process, Customer Insights sends an invisible test push notification for a given device token. If sending fails, the registration process fails as well.

## Push notification sending problems for Android

The following cover push notification sending problems for Android.

**Sending failure includes "Provided service account JSON is incorrect" message**

In order to send push notifications, Customer Insights needs to have a correct service account JSON file uploaded within mobile application CRM UI. A common mistake is to use a google-service.json file. This file is used within source code of mobile app itself and shouldn't be used in CRM. To see how to fetch correct service account JSON file, see [Transition Android push notifications to Firebase Cloud Messaging (FCM) tokens for authentication](push-notification-fcm-token-transition.md).

**Sending failure includes "PROJECT_NOT_PERMITTED" error code**

Likely "Firebase In-App Messaging API" service isn't enabled. Navigate to "Google Cloud" from within Firebase Console UI, find "Firebase In-App Messaging API" and enable it.

**Customer Insights claims notification was sent successfully, but no notification appeared on the screen**

Customer Insights sends push notification using data payload format. It's required to make changes in mobile application code to receive push notification payload and render it as a popup. For instructions, see [Receiving push notifications on mobile devices](developer-notifications.md).

For more information about data payload formats in Firebase, see [https://firebase.google.com/docs/cloud-messaging/concept-options\#notifications_and_data_messages](https://firebase.google.com/docs/cloud-messaging/concept-options#notifications_and_data_messages).

**Sending failure includes unclear error code or message**

Customer Insights sends push notification using Firebase servers directly. Failure response comes directly from Firebase server if there's submission failure. Overview [ErrorCode](https://firebase.google.com/docs/reference/fcm/rest/v1/ErrorCode) for possible error codes and their meaning.

## Push notification sending problems for iOS

For iOS problems troubleshooting, it's possible to use external third-party websites, such as <https://apnspush.com/>. Such websites allow you to quickly test push notification submission and quickly see if changes made would work.

**Sending failure includes BadDeviceToken error code**

Most common reason of this error is mismatching environment of device token and CRM configuration. When device token is generated by iOS application, it's also generated for Sandbox or Production mode. It's required to set the same app mode in the CRM UI and use the same app mode credentials in the CRM mobile application.

**Sending fails for iOS device tokens wrapped by Firebase**

Customer Insights doesn't currently support iOS device tokens working via FCM. Make sure that a device token used for iOS device registration has an original APNS device token in correct format. This token includes only HEX symbols, for example, 0123456789ABCDEF. Make sure the token doesn't exceed 64 characters.

**Sending failure includes unclear error code or message**

Customer Insights sends push notification using APNS servers directly. Failure response comes directly from APNS server if there's submission failure. Overview [local and remote notification programming guide: Communicating with APNs](https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingwithAPNs.html#//apple_ref/doc/uid/TP40008194-CH11-SW17) for possible error codes and their meaning.

[!INCLUDE [footer-include](./includes/footer-banner.md)]
